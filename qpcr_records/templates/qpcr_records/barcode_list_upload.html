{% extends 'qpcr_records/base.html' %} {% block content %} {% load crispy_forms_tags %}
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<div class="container">
    <h1 class="display-4">Upload Barcode List</h1>
    <form class="needs-validation col-4 p-0 my-3" action="/qpcr_records/" method="post" enctype="multipart/form-data" novalidate>
        {% csrf_token %}
        <div class="mb-5 custom-file">
            <input type="file" class="custom-file-input" id="customFile" accept=".txt" name="Select Barcode List File">
            <label class="custom-file-label" for="customFile">Choose file...</label>
        </div>
        <button type="submit" class="btn btn-primary">Upload</button>
    </form>

    {% if messages %}
    <ul class="messages">
        {% for message in messages %}
        <li class="{{ message.tags }}">{{ message }}</li>
        {% endfor %}
    </ul>
    {% endif %}
</div>
<script>
window.addEventListener("load", () => {
    var barcodeInput = document.getElementById('customFile');
    validateForm(barcodeInput, () => {
        var file_extension = barcodeInput.value.split('.').pop().toLowerCase();
        return file_extension == 'txt';
    }, "File type not allowed.");
    success('File uploaded');
    bsCustomFileInput.init();

});
</script>
    {% endblock %}
